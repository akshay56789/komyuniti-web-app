{% load i18n %}
<form class="my-0 d-block d-sm-none" action="" method="post" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="card shadow-sm mb-3">
    <div class="card-body p-2">
      <div class="d-flex align-items-start mb-2">
        <img
          src="{{request.user.avatar.url}}"
          alt="Avatar"
          class="rounded-circle me-2"
          style="height: 2.5rem; width: 2.5rem; object-fit: cover;"
        />
        <textarea
          name="body"
          id="body"
          rows="2"
          class="form-control border-0"
          style="resize: none; background: #f5f8fa;"
          placeholder="{% trans "What's on your mind," %} {{request.user.username}}?"
        ></textarea>
      </div>
      <div class="d-flex justify-content-between align-items-center mt-2">
        <div>
          <label for="image-upload" class="btn btn-light btn-sm p-1 me-1" title="{% trans 'Add image' %}">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
              <path d="M14.002 3a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-12a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h12zm0-1h-12A2 2 0 0 0 0 4v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"/>
              <path d="M10.648 8.646a.5.5 0 0 1 .704.058l2.646 3.182V4a1 1 0 0 0-1-1h-12a1 1 0 0 0-1 1v7.886l3.646-4.364a.5.5 0 0 1 .708-.058l2.646 2.646 2.646-2.646z"/>
              <path d="M4.502 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
            </svg>
          </label>
          <input id="image-upload" type="file" name="image" accept="image/*" style="display: none;">
          <label for="embed-link" class="btn btn-light btn-sm p-1" title="{% trans 'Embed YouTube' %}">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-youtube" viewBox="0 0 16 16">
              <path d="M8.051 1.999h-.002C3.5 2 2.5 2.5 2.5 8s1 6 5.549 6h.002c4.549 0 5.549-.5 5.549-6s-1-6-5.549-6zm0 1.5c4.2 0 4.5.2 4.5 4.5s-.3 4.5-4.5 4.5-4.5-.2-4.5-4.5.3-4.5 4.5-4.5zm-1.5 3.5v3l3-1.5-3-1.5z"/>
            </svg>
          </label>
          <label for="cloudinary-link" class="btn btn-light btn-sm p-1" title="{% trans 'Embed Cloudinary' %}">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-cloud-upload" viewBox="0 0 16 16">
              <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.569 13 12.773 13H5.23C3.507 13 2 11.493 2 9.77c0-1.816 1.239-3.323 2.906-3.77zM8 4a4.53 4.53 0 0 0-3.594 1.777A3.5 3.5 0 0 0 3.5 9.5h-.5a2.5 2.5 0 0 1 .083-4.993A4.53 4.53 0 0 1 8 4zm3.646 5.146a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 .708-.708L8 11.293l2.646-2.647z"/>
            </svg>
          </label>
        </div>
        <button type="submit" class="btn btn-primary btn-sm px-3" onclick="spinner()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
            <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z"/>
          </svg>
          {% trans "Post" %}
        </button>
      </div>
      <div class="mt-2" id="embed-link-container" style="display: none;">
        <input type="text" name="embed" id="embed-link" class="form-control form-control-sm" placeholder="https://youtube.com/embed/YouTube-code">
      </div>
      <div class="mt-2" id="cloudinary-link-container" style="display: none;">
        <input type="text" name="cloud_url" id="cloudinary-link" class="form-control form-control-sm" placeholder="https://res.cloudinary.com/your-cloud-name/image/upload/v1616161616/sample.jpg">
      </div>
    </div>
  </div>
  <script>
    document.querySelector('label[for="embed-link"]').addEventListener('click', function(e) {
      e.preventDefault();
      var embedContainer = document.getElementById('embed-link-container');
      embedContainer.style.display = embedContainer.style.display === 'none' ? 'block' : 'none';
    });
    document.querySelector('label[for="cloudinary-link"]').addEventListener('click', function(e) {
      e.preventDefault();
      var cloudinaryContainer = document.getElementById('cloudinary-link-container');
      cloudinaryContainer.style.display = cloudinaryContainer.style.display === 'none' ? 'block' : 'none';
    });
  </script>
</form>

  