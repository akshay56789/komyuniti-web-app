{% load i18n %}
<form class="new-post-form shadow rounded-4 p-3 mb-4 bg-white" action="" method="post" enctype="multipart/form-data" style="width: 100%; max-width: 900px; margin: 2rem auto;">
  {% csrf_token %}
  <div class="d-flex align-items-start mb-3">
    <img src="{{request.user.avatar.url}}" alt="Avatar" class="rounded-circle me-3 border" style="height: 3rem; width: 3rem; object-fit: cover;">
    <div class="flex-grow-1">
      <textarea name="body" id="body" rows="3" class="form-control border-0 shadow-sm" style="resize: none; background: #f5f6fa;" placeholder="{% trans "What's on your mind," %} @{{request.user.username}}?"></textarea>
    </div>
  </div>
  <div class="d-flex justify-content-between">
    <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample2" role="button" aria-expanded="false"
      aria-controls="collapseExample">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-paperclip"
        viewBox="0 0 16 16">
        <path
          d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0z" />
      </svg>
      {% trans "Attach" %}
    </a>
    <button onclick="spinner()" type="submit" class="btn btn-primary rounded-pill px-4 shadow-sm" style="background: linear-gradient(90deg, #6c63ff 0%, #48c6ef 100%); border: none;">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white" class="bi bi-send me-1" viewBox="0 0 16 16">
        <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z"/>
      </svg>
      {% trans "Post" %}
    </button>
  </div>
  <div class="collapse" id="collapseExample2">
    <div class="card card-body">
      <label>{% trans "Image" %}</label>
      <input style="border: none; outline: none; " type="file" name="image" accept="image/*">
      <label>{% trans "Embed Youtube Link" %}</label>
      <textarea name="embed" id="embed" rows="1" style="width: 100%;" placeholder="Youtube Link"></textarea>
      <label>{% trans "Cloudinary Img" %}</label>
      <textarea name="cloud_url" id="cloud_url" rows="1" style="width: 100%;"
        placeholder="Cloudinary Image URL"></textarea>
    </div>
  </div>
</form>
<script>
  // Show YouTube link input when icon is clicked
  document.querySelector('label[for="youtube-link"]').addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('youtube-link-field').style.display = 'block';
    document.getElementById('youtube-link').focus();
  });
  
  // Show Cloudinary link input when icon is clicked
  document.querySelector('label[for="cloudinary-link"]').addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('cloudinary-link-field').style.display = 'block';
    document.getElementById('cloudinary-link').focus();
  });
</script>
<style>
  .new-post-form textarea:focus {
    background: #e9ecef;
    box-shadow: 0 0 0 2px #6c63ff33;
  }
  .new-post-form .btn-light:hover {
    background: #f0f0ff;
  }
  .new-post-form .btn-primary:active {
    background: #5a54e8 !important;
  }
</style>